define("autoComplete",function(c,a,b){return define("autoComplete",function(e,t,i){!function(){function e(){var l=t.attr("hl-cls");clearTimeout(n),t.removeClass(l).removeAttr("hl-cls"),t=null,i.off("touchend touchmove touchcancel",e)}var t,n,i=$(document);$.fn.highlight=function(l,o){return this.each(function(){var a=$(this);a.css({"-webkit-tap-highlight-color":"rgba(255,255,255,0)"}).off("touchstart.hl"),l&&a.on("touchstart.hl",function(s){var r;t=o?(r=$(s.target).closest(o,this))&&r.length&&r:a,t&&(t.attr("hl-cls",l),n=setTimeout(function(){t.addClass(l)},100),i.on("touchend touchmove touchcancel",e))})})}}(),function(){function e(){return window.autoCompleteId++}function t(t){function o(e){re&&clearTimeout(re),re=setTimeout(function(){if(g.ajaxObj)try{g.ajaxObj.abort()}catch(n){}g.ajaxObj=$.ajax({url:e,data:H+"="+encodeURIComponent(N.val()),type:S,dataType:X,error:function(){},success:function(e){M(e);var n=y?y(e):e;if(g.origin=N.val(),n&&n.length)r(P),a(n,N.val());else{V&&a(),V||m(C);var i=N.val();i.length>ie&&(i=i.substring(0,ie)+"..."),0==t.title&&b.css({display:"block"}),r(\'对不起，找不到：<span class="\'+ee+\'">\'+i+"</span>"),i=null}}}),re=null},200)}function a(e,t,n){e&&w&&w.call(N,e),D=e;for(var i=[],l=[],o=0,a=e.length;a>o;o++){var r=l.length;l[r]=e[o],(r==E-1||o==e.length-1)&&(i[i.length]=l,l=[])}s(i,t,n)}function s(e,t,i){i=i?i:0;var l,o,a;if(m(C),e[i]&&e[i].length){for(n=0;n<e[i].length;n++)e[i][n]&&(row=C.insertRow(-1),cell=row.insertCell(-1),o=G.call(row,e[i][n],n),row.className=K,o&&(row.className+=" "+Q),l=_.call(row,e[i][n],n),l===!1?C.deleteRow(-1):cell.innerHTML=(a=W.call(row,e[i][n],n))?h(l,t):l);C.index=-1,$(".autofill_item",C).highlight("item-state-hover")}}function r(e){N.setTitle(e)}function c(e,t){var n,i,l,o,a,s,r,u,h,f,d=[],p=t;u=p.length;for(var r=0;u>r;r++){n=p[r],i=n.match,f=i.length,o=-1;for(var h=0;f>h;h++)l=i[h],Y&&(l=l.toLowerCase()),(a=l.indexOf(e))>-1&&(-1===o||o>a)&&(o=a,s=l);o>-1&&(L&&L(n,s,o),d[d.length]=n)}return!d.length&&V?(e=e.substr(0,e.length-1),""!==e&&(d=c(e,p)),d.matchFalid=!0):(d.matchLength=e.length,!d.length&&!V),d}function u(e,n){var i;Y&&(e=e.toLowerCase()),i=""===e?j:c(e,n),g.origin=e;var l=e;e.length>ie&&(l=e.substring(0,ie)+"..."),i.length?(O&&i.sort(O),i.matchFalid?(0==t.title&&b.css({display:"block"}),r(\'对不起，找不到：<span class="\'+ee+\'">\'+l+"</span>")):r(ne&&""!=e?e+"，"+P:P),a(i,e.substr(0,i.matchLength),0)):(0==t.title&&b.css({display:"block"}),r(\'对不起，找不到：<span class="\'+ee+\'">\'+l+"</span>"),V||m(C)),l=null}function h(e,t){if(q&&""!==t){var n=t?t:N.val();"\\\\"===n&&(n="\\\\\\\\");var i=new RegExp(n,"g"+(Y?"i":""));return e.replace(/(>|^)([^>^<]+)(<|$)/g,function(e){return e.replace(i,function(e){return\'<span class="\'+ee+\'">\'+e+"</span>"})})}return e}function f(e){if(0==t.title&&b.css({display:"block"}),e)var n=(e.target,l(e));var i,a,s=C,r=v.css("display");if(i=N.val(),""===i){if(N.show(),0===j.length)return void N.hide();u(i,j)}else N.show();if(13===n&&"none"!==r){var c=$("."+K,s);t.submit&&t.submit(N),D[s.index]&&(g.val(z.call(c[s.index],D[s.index],s.index)),t.selectItemFn&&"function"==typeof t.selectItemFn&&t.selectItemFn(g,c[s.index])),N.hide()}else 40===n||38===n?p(n,s,g):13===n&&"none"===r?N.hide():(a=A,a?o(a):u(i,k))}function d(e,t,n){if(!e||1!==e[0].nodeType||!t||1!==t[0].nodeType)throw new Error("需要指定输入域和/或及其弹框！");var l,o=$(window).width(),a=($(window).height(),t.width()),s=t.height(),r=e.width(),c=(e.height(),t.offset());if(n&&!i(n))n.x="number"==typeof n.x?n.x:0,n.y="number"==typeof n.y?n.y:0;else var n={x:0,y:0};e.css((l=c.left)>o-c.left&&o-c.left<r?{left:c.left+a-r-n.x+"px"}:{left:c.left+n.x+"px"}),e.css({top:c.top+s+n.y+"px"})}function p(e,t,n){var i=$("."+K,t),l=i.length-1,o=0;if(i.length)switch(i.toggleClass(Z,""),e){case 40:do t.index++;while(i[t.index]&&!$(i[t.index]).hasClass(Q));t.index>l?(t.index=-1,n.val(n.origin)):($(i[t.index]).addClass(Z),o=t.index,n.val(z.call(i[t.index],D[o],o)));break;case 38:do t.index--;while(i[t.index]&&!$(i[t.index]).hasClass(Q));o=t.index,-1===t.index?n.val(n.origin):t.index<-1?(t.index=l,n.val(z.call(i[t.index],D[t.index],t.index)),$(i[t.index]).addClass(Z)):($(i[t.index]).addClass(Z),n.val(z.call(i[t.index],D[o],o)))}}function m(e){e.index=U;for(var t=$("."+K,e),n=t.length;n-- >0;)e.deleteRow(-1)}var g,v,x,w,y,C,b,F=e(),T=\'<div id="autoComplete-\'+F+\'" class="autofill-wrap"><div class="show-title"><span class="autofill-hd-inner"></span><span class="autofill-close"></span></div><table class="autofill-tray" cellpadding="0" cellspacing="0"></table></div>\',k=[],j=[],D={},I={x:0,y:0},P="输入中文/拼音",N={},L=null,O=null,R="100%",q=!0,E=999,U=0,V=!1,A="",H="val",S="GET",X="json",Y=!0,_=function(){},z=function(){},G=function(){return!0},M=function(){},W=function(){return!0},B=!1,J="",K="autofill_item",Q="enableListRow",Z="autofill-hover",ee="autofill-hili",te=!1,ne=!1,ie=10,le=!0,oe="body",ae=!1,se=!1;if(g=t.input?$(t.input):null,!g[0])throw new Error("The relevant element does not exist");oe=$(t.content?t.content:oe),v=$(T).appendTo(oe),x=$(".autofill-hd-inner",v),b=$(".show-title",v),C=$(".autofill-tray",v)[0],I.x=void 0!==t.offsetX?t.offsetX:0,I.y=void 0!==t.offsetY?t.offsetY:0,y="function"==typeof t.processAjaxDataFn?t.processAjaxDataFn:null,_="function"==typeof t.itemPrintFn?t.itemPrintFn:null,"string"==typeof t.title&&$.trim(t.title).length&&(P=t.title,x.html(t.title)),"string"==typeof t.theme&&$.trim(t.theme).length&&(J=t.theme,v.addClass(t.theme)),"string"==typeof t.itemClass&&$.trim(t.itemClass).length&&(K=t.itemClass),"string"==typeof t.highlightClass&&$.trim(t.highlightClass).length&&(ee=t.highlightClass),"function"==typeof t.ajaxFn&&(M=t.ajaxFn),R=t.width?t.width:R,w=t.processPrintDataFn?t.processPrintDataFn:w,L=t.preSortFn?t.preSortFn:L,E=t.max?t.max:E,O=t.sortFn?t.sortFn:O,V=t.keepListOnNoResult?t.keepListOnNoResult:V,A=t.requestUrl?t.requestUrl:A,S=t.requestType?t.requestType:S,X=t.dataType?t.dataType:X,_=t.itemPrintFn?t.itemPrintFn:_,G=t.itemEnableFn?t.itemEnableFn:G,z=t.itemValueFn?t.itemValueFn:z,k=t.localData?t.localData:k,j=t.defaultData?t.defaultData:j,W=t.itemHighlightFn?t.itemHighlightFn:W,Z=t.chooseClass?t.chooseClass:Z,se=t.showClosebtn===!0?!0:!1,$(".autofill-close",v).css({display:se?"block":"none"}),ne=t.showUserInput?t.showUserInput:ne,R&&v.css({width:R+"px"}),ie=t.maxOverFlowNum?t.maxOverFlowNum:ie,H=t.requestValName?t.requestValName:H,v.needClose=t.needClose?t.needClose:ae,te=t.needPositionWrap?!0:te,te&&d(v,g,I),v.css({display:"none"});var re;return g.on("keyup",f),g.on("input",f),g.on("click focus",function(){0!==j.length&&N.show()}),v.on("click",function(e){var n,i,l=e.target,o=C;for(i=$("."+K,o);null!==l;){if(n=$(l),n.hasClass(K)){i.each(function(e,a){return a===l&&$(l).hasClass(Q)?(i.toggleClass(Z,""),n.addClass(Z),o.index=e,g.val(z.call(i[o.index],D[o.index],o.index)),t.selectItemFn&&"function"==typeof t.selectItemFn&&t.selectItemFn(g,i[o.index]),!1):void 0}),N.hide();break}l=l.parentNode}}),se&&$(".autofill-close",v).on("click",function(){N.hide()}),g.on("mousedown",function(){B=!0}),g.on("mouseup",function(){B=!1}),v.on("mousedown",function(){B=!0}),v.on("mouseup",function(){B=!1}),g.on("blur",function(){setTimeout(function(){B||(N.hide(),B=!1)},0)}),$(window).on("resize orientationchange",function(){N.resetPosition()}),N.macth=function(e){e?u(N.val(),e):u(N.val(),k)},N.hide=function(){v.needClose&&v.css({display:"none"})},N.show=function(){"none"===v.css("display")&&(v.css({display:"block"}),N.resetPosition()),le===!0&&0!==j.length?(t.title!==!1&&N.setTitle(P),a(j,"",0),le=!1):j.reset&&(a(j,"",0),t.title===!1&&N.setTitle(""))},N.setTitle=function(e){x.html(e)},N.resetDefaultData=function(e){j=e?e:[],j.reset=!0},N.val=function(e){return void 0===e?$.trim(g.val()):void g.val(e)},N.resetPosition=function(){te&&d(v,g,I)},N.requestUrl=function(e){"string"==typeof e&&(A=e)},N.localData=k,N.resetlocalData=function(e){k=e},N}function i(e){for(var t in e)return!1;return!0}function l(e){return e=event,e.which?e.which:e.keyCode}window.autoCompleteId=window.autoCompleteId||1,$.autoComplete=function(e){return new t(e)},$.fn.autoComplete=function(e){return e.input=this,new t(e)}}()});},'m');