define("common.0.2.6",function (require, exports, module) {
	Zepto.cookie=function(t,x,u){if(typeof x!="undefined"){u=u||{};if(x===null){x="";u.expires=-1}var r="";if(u.expires&&(typeof u.expires=="number"||u.expires.toUTCString)){var p;if(typeof u.expires=="number"){p=new Date();p.setTime(p.getTime()+(u.expires*24*60*60*1000))}else{p=u.expires}r="; expires="+p.toUTCString()}var v=u.path?"; path="+u.path:"";var q=u.domain?"; domain="+u.domain:"";var w=u.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(x),r,v,q,w].join("")}else{var o=null;if(document.cookie&&document.cookie!=""){var n=document.cookie.split(";");for(var s=0;s<n.length;s++){var i=Zepto.trim(n[s]);if(i.substring(0,t.length+1)==(t+"=")){o=decodeURIComponent(i.substring(t.length+1));break}}}return o}};$.fn.show=function(){this.each(function(a,b){b.style.display="block"});return this};var StorageHelp={SetStorage:function(a,c){if(window.localStorage){var d=window.localStorage;try{d.setItem(a,c)}catch(b){$.cookie(a,c,{expires:30})}}else{$.cookie(a,c,{expires:30})}},GetStorage:function(a){if(window.localStorage){var c=window.localStorage;try{c=c.getItem(a);if(c==null||c==""){return $.cookie(a)==null?"":$.cookie(a)}else{return c}}catch(b){return $.cookie(a)==null?"":$.cookie(a)}}else{return $.cookie(a)==null?"":$.cookie(a)}}};var mobileUtil={touch:("createTouch" in document),start:this.touch?"touchstart":"mousedown",move:this.touch?"touchmove":"mousemove",end:this.touch?"touchend":"mouseup",click:this.touch?"tap":"click",dialog:function(l,k,j,c){if($(k+" #showTip").length<1){var i={_content_:l,_confirm_:c||"确认"};var h=$(this.dialogTpl().replace(/_[^_]*_/g,function(a){return i[a]}));$(".msg-btn",h[1]).bind("click",function(){$("#bgTip").remove();$("#showTip").remove();startScroll();j&&j()});$(k).append(h);stopScroll()}},dialogTpl:function(){return'<div id="bgTip" style="display: block;"></div><div id="showTip"><div class="msg-content">_content_</div><div class="msg-btn"><button style="margin:0;" class="btn touchable">_confirm_</button></div></div>'},confirm:function(o,n,m,h,l,p){var j={_cancle_:h||"取消",_confirm_:l||"确认",_content_:o},i=$(this.confirmTpl().replace(/_[^_]*_/g,function(a){return j[a]}));$(".cancle",i).bind(this.click,function(){startScroll();p&&p();i.remove()});$(".confirm",i).bind(this.click,function(){startScroll();m&&m();i.remove()});$(n).append(i);stopScroll()},confirmTpl:function(){return'<div id="bgTip" style="display: block;"><div id="showTip"><div class="msg-content">_content_</div><div class="msg-btn double"><button  class="cancle btn graybt touchable">_cancle_</button><button  class="confirm btn touchable">_confirm_</button></div></div></div>'}};function stopScroll(){$("body").on("touchmove",function(b){b.preventDefault()})}function startScroll(){$("body").off("touchmove")}var modal={checkParam:function(b){var a=typeof b=="string"?$("#"+b):b;return a},into:function(b,a){this.checkParam(b).removeClass("modal-out").addClass("modal-in");this.checkParam(a).addClass("modal-bg-visible");stopScroll()},out:function(b,a){this.checkParam(b).removeClass("modal-in").addClass("modal-out");this.checkParam(a).removeClass("modal-bg-visible");startScroll()}};Date.prototype.format=function(a){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds(),"w+":Date.getWeek(this.getDay())};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var b in c){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,RegExp.$1.length==1?c[b]:("00"+c[b]).substr((""+c[b]).length))}}return a};Date.getWeek=function(a){this.aWeek=["周日","周一","周二","周三","周四","周五","周六"];return this.aWeek[a]};Date.ParseString=function(j){var g=/(\d{4})-(\d{1,2})-(\d{1,2})(?:\s+(\d{1,2}):(\d{1,2}):(\d{1,2}))?/i,f=g.exec(j),h=0,i=null;if(f&&f.length){if(f.length>5&&f[6]){h=Date.parse(j.replace(g,"$2/$3/$1 $4:$5:$6"))}else{h=Date.parse(j.replace(g,"$2/$3/$1"))}}else{h=Date.parse(j)}if(!isNaN(h)){i=new Date(h)}return i};function showLoading(){$("body").append('<div class="opLayer"><div class="loading"><em class="loadingImg"></em></div></div>')}function hideLoading(){$(".opLayer").remove()}function showMsgLoading(b,c,a){$("body").append('<div class="opMsgLayer"><div class="loading">'+b+"</div></div>");loadTimeout=setTimeout(function(){hideMsgLoading();if(a){a()}},c)}function hideMsgLoading(){$(".opMsgLayer,.opLayer").remove();if(typeof loadTimeout!="undefined"){clearTimeout(loadTimeout)}}function showConfirm(a){$("body").append('<div class="ex-popoup-hint exph-suc"><s></s><span class="con">'+a+"</span></div>");setTimeout(function(){$(".ex-popoup-hint").hide()},2000)}function showToast(c,a){if(c&&$("#toastEle").length==0){$("body").append('<div id="toastEle" class="ui-toast"><div class="ui-toast-padding"><div class="ui-toast-content">'+c+"</div></div></div>")}else{return}var b=$("#toastEle");b.css({"margin-top":-Math.round(b.offset().height/2)+"px",left:Math.round(($(window).width()-b.width())/2)+"px"});setTimeout(function(){b.css({opacity:0});setTimeout(function(){b.remove()},1000)},(a||2000))}function getRequest(){var g=window.location.search.substring(1),c=g.split("&"),a={};if(g==""){return{}}for(var b=0;b<c.length;b++){var f=c[b].indexOf("=");if(f==-1){continue}var d=c[b].substring(0,f),e=c[b].substring(f+1);a[d]=e}return a}function getWxObj(){var b=$.cookie("WxUser");var d=new Object();if(b){var c=b.split("&");for(var a=0;a<c.length;a++){d[c[a].slice(0,c[a].indexOf("="))]=c[a].slice(c[a].indexOf("=")+1)}}return d}function getCooperateUser(){var b=$.cookie("CooperateWxUser")||$.cookie("CooperateUser");var d=new Object();if(b){var c=b.split("&");for(var a=0;a<c.length;a++){d[c[a].slice(0,c[a].indexOf("="))]=c[a].slice(c[a].indexOf("=")+1)}}return d}(function(h){var m={},o=window,a=o.document,g="localStorage",i="script",j;m.disabled=false;m.version="1.3.17";m.set=function(e,q){};m.get=function(q,e){};m.has=function(e){return m.get(e)!==undefined};m.remove=function(e){};m.clear=function(){};m.transact=function(q,e,r){if(r==null){r=e;e=null}if(e==null){e={}}var s=m.get(q,e);r(s);m.set(q,s)};m.getAll=function(){};m.forEach=function(){};m.serialize=function(e){return JSON.stringify(e)};m.deserialize=function(r){if(typeof r!="string"){return undefined}try{return JSON.parse(r)}catch(q){return r||undefined}};function f(){try{return(g in o&&o[g])}catch(e){return false}}if(f()){j=o[g];m.set=function(e,q){if(q===undefined){return m.remove(e)}j.setItem(e,m.serialize(q));return q};m.get=function(q,e){var r=m.deserialize(j.getItem(q));return(r===undefined?e:r)};m.remove=function(e){j.removeItem(e)};m.clear=function(){j.clear()};m.getAll=function(){var e={};m.forEach(function(q,r){e[q]=r});return e};m.forEach=function(e){for(var q=0;q<j.length;q++){var r=j.key(q);e(r,m.get(r))}}}else{if(a.documentElement.addBehavior){var l,k;try{k=new ActiveXObject("htmlfile");k.open();k.write("<"+i+">document.w=window</"+i+'><iframe src="/favicon.ico"></iframe>');k.close();l=k.w.frames[0].document;j=l.createElement("div")}catch(b){j=a.createElement("div");l=a.body}var p=function(e){return function(){var q=Array.prototype.slice.call(arguments,0);q.unshift(j);l.appendChild(j);j.addBehavior("#default#userData");j.load(g);var r=e.apply(m,q);l.removeChild(j);return r}};var c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");var d=function(e){return e.replace(/^d/,"___$&").replace(c,"___")};m.set=p(function(q,e,r){e=d(e);if(r===undefined){return m.remove(e)}q.setAttribute(e,m.serialize(r));q.save(g);return r});m.get=p(function(r,q,e){q=d(q);var s=m.deserialize(r.getAttribute(q));return(s===undefined?e:s)});m.remove=p(function(q,e){e=d(e);q.removeAttribute(e);q.save(g)});m.clear=p(function(q){var e=q.XMLDocument.documentElement.attributes;q.load(g);while(e.length){q.removeAttribute(e[0].name)}q.save(g)});m.getAll=function(q){var e={};m.forEach(function(r,s){e[r]=s});return e};m.forEach=p(function(t,r){var q=t.XMLDocument.documentElement.attributes;for(var s=0,e;e=q[s];++s){r(e.name,m.deserialize(t.getAttribute(e.name)))}})}}try{var n="__storejs__";m.set(n,n);if(m.get(n)!=n){m.disabled=true}m.remove(n)}catch(b){m.disabled=true}m.enabled=!m.disabled;h.store=m;h.storeWithExpiration={set:function(q,r,e){m.set(q,{val:r,exp:e,time:new Date().getTime()})},get:function(q){var e=m.get(q);if(!e){return null}if(new Date().getTime()-e.time>e.exp){return null}return e.val}}})(window);var browser={versions:function(){var b=navigator.userAgent,a=navigator.appVersion;return{trident:b.indexOf("Trident")>-1,presto:b.indexOf("Presto")>-1,webKit:b.indexOf("AppleWebKit")>-1,gecko:b.indexOf("Gecko")>-1&&b.indexOf("KHTML")==-1,mobile:!!b.match(/AppleWebKit.*Mobile.*/)||!!b.match(/AppleWebKit/),ios:!!b.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:b.indexOf("Android")>-1||b.indexOf("Linux")>-1,iPhone:b.indexOf("iPhone")>-1||b.indexOf("Mac")>-1,iPad:b.indexOf("iPad")>-1,webApp:b.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};var utilityServertime=function(){var f;function g(h){$.ajax({url:"GetServiceTime",dataType:"jsonp",timeout:3000,success:function(k){if(k.ResponseStatus){var l=k.ResponseMessage.replace(/-/g,"/");var i=new Date();f={server:new Date(Date.parse(l)),local:i};var j=i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds();store.set("TRAIN_SERVERTIME",{serverTimeStr:l,localtimeStr:j})}},complete:function(){if(h){h()}}})}function b(i){var j=store.get("TRAIN_SERVERTIME");if(j){try{f={server:new Date(Date.parse(j.serverTimeStr)),local:new Date(Date.parse(j.localtimeStr))};if(i){i()}}catch(h){g(i)}}else{g(i)}}var d=function(){if(typeof f=="undefined"||!f.server){return false}return true};var a=function(){var h;if(d()){h=new Date(new Date().getTime()+(f.server-f.local))}else{h=new Date()}return h};var c=function(){return a().getTime()};var e=function(){var l=WebConfigUrl.WorkSTime,j=WebConfigUrl.WorkETime,k=parseInt(l.split(":")[0])*60+parseInt(l.split(":")[1]),i=parseInt(j.split(":")[0])*60+parseInt(j.split(":")[1]);var h=utilityServertime.getDate().getHours()*60+utilityServertime.getDate().getMinutes();if(h>=k&&h<i){return true}else{return false}};b();return{getDate:a,getUnix:c,isWorkTime:e,getServertime:b}}();function jqshow(b){$(b).show()}function jqhide(b){$(b).hide()}var clearInput=function(c,a,b){var c=typeof a=="string"?$(c):c,a=typeof a=="string"?$(a):a;c.each(function(){var d=$(this);d.btn=false;d.bind({focus:function(){var e=$.trim(d.val());if(e!=""){a.addClass("not-empty")}if(d.btn){jqshow("#trainPasswordClear")}},blur:function(){a.removeClass("not-empty")},input:function(){if(this.timer){clearTimeout(this.timer)}var e=d.val();e==""?a.removeClass("not-empty"):a.addClass("not-empty");if(d.btn){jqshow("#trainPasswordClear")}if(d.attr("id")=="trainPassword"){if(!e&&!utilityRailway.needAutoLogin){jqshow("#eye-password");jqhide("#trainPasswordClear");$("#trainPasswordClear").addClass("trainpasswordeye");d.btn=true}}}});a.bind("touchend",function(f){f.preventDefault();f.stopPropagation();d.val(""),d.keyup(),d.focus(),d.trigger("input"),typeof b=="function"&&b.call(this);var g=d.val();if(d.attr("id")=="trainPassword"){if(!g&&!utilityRailway.needAutoLogin){jqshow("#eye-password");jqhide("#trainPasswordClear");$("#trainPasswordClear").addClass("trainpasswordeye");d.btn=true}}})})};var WebConfigUrl={};WebConfigUrl.PublicInterface=$("#PublicInterface").val();WebConfigUrl.OrderDetail=$("#ResourceUrl").val()+"OrderOperation/QueryOrderDetailsV1";WebConfigUrl.ticketSearch=$("#TicketSearch").val()+"ticket/searchfortouch";WebConfigUrl.StationUrl=$("#TicketSearch").val()+"Station";WebConfigUrl.MonitorHandle=$("#ResourceUrl").val()+"OrderOperation/MonitorHandle";WebConfigUrl.HotelAjaxCall=$("#HotelAjaxCall").val();WebConfigUrl.WritePayBack=$("#PayBackUrl").val();WebConfigUrl.CallBackUrl=$("#CallBackUrl").val();WebConfigUrl.MerchentReUrl=$("#MerchentReUrl").val();WebConfigUrl.LoginUrl=$("#LoginUrl").val();WebConfigUrl.MyOrders=$("#MyOrders").val();WebConfigUrl.RefundOrderTime=$("#RefundOrderTime").val();WebConfigUrl.GetCityUrl=$("#GetCityUrl").val();WebConfigUrl.WorkSTime=$("#WorkSTime").val();WebConfigUrl.WorkETime=$("#WorkETime").val();WebConfigUrl.SaveMemberUrl=$("#ResourceUrl").val()+"FavoriteContacts/SaveMemberLinker";WebConfigUrl.PayUrl=$("#PayUrl").val();WebConfigUrl.GetOrderTrackingUrl=$("#ResourceUrl").val()+"OrderOperation/SearchOrderTracking";WebConfigUrl.wxTrainUrl=$("#wxTrainUrl").val();WebConfigUrl.wxFlightRootUrl=$("#wxFlightRootUrl").val();WebConfigUrl.wxFlightUrl=$("#wxFlightUrl").val();WebConfigUrl.hotCityUrl=$("#hotCityUrl").val();WebConfigUrl.letterCityUrl=$("#letterCityUrl").val();WebConfigUrl.wxIndexUrl=$("#wxIndexUrl").val();WebConfigUrl.WeChatHoldingSeat=$("#ResourceUrl").val()+"OrderOperation/WeChatHoldingSeat";WebConfigUrl.VerificationIdentity=$("#ResourceUrl").val()+"OrderOperation/VerificationIdentity";WebConfigUrl.GetNoticeInfo=$("#ResourceUrl").val()+"Notice/GetNoticeInfo";WebConfigUrl.TrainRefundTrack=$("#ResourceUrl").val()+"OrderOperation/RefundTrack";WebConfigUrl.CancelNightOrderUrl=$("#ResourceUrl").val()+"Handlers/TrainTicket.ashx";WebConfigUrl.ActiveUrl=$("#activeUrl").val();WebConfigUrl.IsOpenActive=$("#ResourceUrl").val()+"OrderOperation/ActiveSendPackageControl";WebConfigUrl.UseList=$("#ResourceUrl").val()+"ManageWXCard/GetUserTrainActivityUseList";WebConfigUrl.UpdateUseInfo=$("#ResourceUrl").val()+"AddWXCard/UpdateActivityUseInfo";WebConfigUrl.Authentication=$("#ResourceUrl").val()+"OrderOperation/Authentication";WebConfigUrl.BookChangeOrder=$("#ResourceUrl").val()+"OrderOperation/BookChangeOrder";WebConfigUrl.UpdatePassengerInfo=$("#ResourceUrl").val()+"OrderOperation/UpdatePassengerInfo";WebConfigUrl.getShareStatus=$("#ResourceUrl").val()+"ManageWXCard/GetShareStatus";WebConfigUrl.setShareStatus=$("#ResourceUrl").val()+"ManageWXCard/SetShareStatus";WebConfigUrl.wxCouponShareUrl=$("#wxCouponShareUrl").val();WebConfigUrl.PublicServiceTime="http://www.ly.com/huochepiao/resource/PublicInterface/GetServiceTime";WebConfigUrl.offlineTicketVerification=$("#TrainorderPublicUrl").val()+"TCOrder/offlineTicketVerification";WebConfigUrl.GetPostFee=$("#TrainorderPublicUrl").val()+"TCOrder/GetPostFee";(function(a){a.prototype.zjTrim=function(){return this.replace(/^\s+|\s+$/g,"")};a.prototype.zjEndWiths=function(b){return this.lastIndexOf(b)==this.length-b.length};a.prototype.zjFill=function(b){var f=this;if(b!=null){var e,g=Object.prototype.toString.call(b),c=g=="[object Array]"||g=="[object Object]"?b:arguments;for(var d in c){e=new RegExp("\\{"+d+"\\}","gm");f=f.replace(e,c[d])}}return f};a.prototype.zjReplace=function(d,c){var e=this,b=0;while((b=e.indexOf(d,b))>-1){e=e.substring(0,b)+c+e.substring(b+d.length);b+=c.length}return e}})(String);(function(){var b={touchStart:"touchstart"};var d=function(f){var g={bgCls:"zjPopupBg",cls:"zjPopup",speed:400,showAn:null,hideAn:null,isShowBg:true,html:"",showBefore:null,hideBefore:null,autoDestroy:true},h=this;for(var e in f){g[e]=f[e]}this.opts=g;this.bg=null;this.container=null;(function(){h.container=$("<div class='"+g.cls+"'>"+g.html+"</div>").css("zIndex",2050);h.container.appendTo(document.body);h.container.on(b.touchStart,function(i){});if(h.opts.isShowBg){h.bg=$("<div class='"+g.bgCls+"'></div>").css("zIndex",d.zIndex++);h.bg.appendTo(document.body);h.bg.on(b.touchStart,function(i){i.preventDefault()})}$(window).bind("resize",function(){if(h.isHided()||h.isDestroy()){return}h.toCenter()})})()};d.prototype={setContent:function(e){this.container.html(e)},setAutoDestroy:function(e){this.opts.autoDestroy=e},getPosition:function(){var e=this.container.offset();return{x:e.left,y:e.top}},getCenter:function(){var e=this;return{left:($(window).width()-e.container.width())/2,top:($(window).height()-e.container.height())/2}},toCenter:function(){var e=this.getCenter();e.left=e.left/$(window).width()*100+"%";e.top=e.top/$(window).height()*100*0.8+"%";this.container.css(e)},isHided:function(){var e=this.container.css("display");return !e||e=="none"||this.container.css("opacity")==0},isDestroy:function(){return this.container==null},show:function(){if(this.isHided()){if(this.opts.showBefore){this.opts.showBefore(this)}if(this.bg){this.bg.css("opacity",0.5).show()}if(this.opts.hideAn){this.container.removeClass(this.opts.hideAn)}if(this.opts.showAn){this.container.addClass(this.opts.showAn)}else{this.container.show()}this.toCenter()}},hide:function(){if(this.opts.hideBefore){this.opts.hideBefore(this)}if(this.opts.showAn){this.container.removeClass(this.opts.showAn)}if(this.opts.hideAn){this.container.addClass(this.opts.hideAn)}else{this.container.hide()}if(this.bg){this.bg.hide()}this.autoDestroy()},hideTo:function(j,k){j=typeof j=="string"?$(j):j;var f={offsetX:0,offsetY:0};if(k){for(var e in k){f[e]=k[e]}}if(this.opts.hideBefore){this.opts.hideBefore(this)}var g=j.offset(),h=this.container.offset(),l=g.left-h.left-g.width/2+f.offsetX,m=g.top-h.top-60+f.offsetY;this.container.css({"-webkit-transition":"all 0.8s","-webkit-transform":"translate({0}px,{1}px) scale(0,0)".zjFill(l,m)});if(this.bg){this.bg.hide()}this.autoDestroy()},autoDestroy:function(){var e=this;if(this.opts.autoDestroy){setTimeout(function(){e.destroy()},this.opts.speed+600)}},destroy:function(){if(this.bg){this.bg.remove()}if(this.container){this.container.remove()}this.bg=null;this.container=null},animateNo:function(){this.animate("zjPopupNo",600)},animate:function(e,f){var g=this;this.container.addClass(e);setTimeout(function(){g.container.removeClass(e)},f+100)}};d.zIndex=2015;d.getBtnMsg=function(k,f){var g="";for(var j in f){g+="<div>"+f[j].text+"</div>"}var l=new d({html:"<div class='btnMsg'><div></div><div class='btnContainer'>"+g+"</div></div>"});l.setContent=function(h){this.container.find(".btnMsg > div").eq(0).text(h)};l.setContent(k);var e=l.container.find(".btnMsg > div:last-child > div");for(var j in f){e.eq(j).on(b.touchStart,f[j].fun)}return l};d.getAlert=function(f,e){var g=d.getBtnMsg(f,[{text:"确定",fun:function(){g.hide();if(e){e()}}}]);return g};d.getConfirm=function(f,g,e){var h=d.getBtnMsg(f,[{text:"取消",fun:function(){h.hide();if(e){e()}}},{text:"确定",fun:function(){h.hide();if(g){g()}}}]);return h};d.getToast=function(f,e){e=e||2000;var g=new d({isShowBg:false,speed:1000,html:"<div class='toast'><div class='msg'></div></div>",showBefore:function(h){setTimeout(function(){h.hide()},e+h.opts.speed)}});g.setContent=function(h){this.container.find(".toast > div").text(h)};g.setContent(f);return g};d.getIconToast=function(f,g,e){e=e||2000;var h=new d({isShowBg:false,speed:1000,html:"<div class='toast'><div class='icon'></div><div class='msg'></div></div>",showBefore:function(i){setTimeout(function(){i.hide()},e+i.opts.speed)}});h.setContent=function(i,j){this.container.find(".toast .icon").html("<img src='"+i+"' />");this.container.find(".toast .msg").text(j)};h.setContent(f,g);return h};d.getSuccessToast=function(f,e){return d.getIconToast("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABMBAMAAABkLX97AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURQAAAP///////////////////////////////////////////7QJjekAAAALdFJOUwAKwNka8KdNZYUz7dJFZQAAATdJREFUSMft1z9Lw2AQBvBXUGM7SYVCRzvq0iGLdCkUnF2csqTglqVLJ5fuLn4Jv4Cl2nJfrn/S5s1L7y73DKEouS3D8QvhnjviXFN11PPrG9ZwOaTFCOoYE1EMEoQhO4IoBQmiF5SgAUrQJ0p836LE/Z8m2glKfOUNPzAxqZ9IYcL9P6LXn2PExaPyqVmio0yMRMhTyRLXylgeiTDdV8roH4i1YzpYJGKJw1uxyIwllAwLhBJigZARkRCRd4mQkIiUTcsiCsEjKsEiKuGR2EoUiD+MFcQpciTkcLq7EPnIH1fKAtjnqkBuqok8uwViIELERASIiSgjRqKEGAmPPFmJAiEr4REzESIr0+YvI1PbsfDIr/G8eMRIeMRKeMRMONcFiS2SgUSOIMS2MlpOsY5W8tD8Bp2tNsf7x3UWg/gnAAAAAElFTkSuQmCC",f,e)};d.getLoading=function(f,e){var g=new d({html:"<div class='loading'><div></div><div></div></div>"});g.container.find(".loading > div").eq(0).html(e?"<img src='"+e+"' />":"<div class='img'></div>");g.setContent=function(h){this.container.find(".loading > div").eq(1).text(h)};g.setContent(f||"正在加载......");return g};d.get12306Loading=function(e){var f=new d({html:'<div class="loading-box"><div class="icon-train-two loading-icon"><div class="icon-train-two loading-gif"></div></div><p class="loading-content"></p></div>'});f.setContent=function(g){this.container.find(".loading-content").text(g)};f.setContent(e||"正在加载...");return f};var c=null;d.showLoading=function(e){if(c==null){c=d.getLoading();c.setAutoDestroy(false)}c.setContent(e||"正在加载数据。。。");c.show()};d.hideLoading=function(){if(c){c.hide()}};var a=null;d.show12306Loading=function(e){if(a==null){a=d.get12306Loading(e);a.bg.css("opacity","0");a.setAutoDestroy(false)}else{a.setContent(e)}a.show()};d.hide12306Loading=function(){if(a){a.hide()}};d.getCloseBox=function(h,e,g,f){var i=new d({html:"<div class='closeBox'><div><span class='icon-train-two'></span></div><div class='msg'></div><div class='btnContainer'><div></div></div></div>"});i.bg.css("opacity","0.5");i.setContent=function(j){this.container.find(".msg").eq(0).html(j)};i.setContent(h);i.container.find(".closeBox > div:first-child > span").eq(0).bind("click",function(){i.hide();if(f){f()}});i.container.find(".btnContainer > div").eq(0).bind("click",function(){i.hide();if(g){g()}}).text(e);return i};d.getSingleInput=function(m,l,e){var k={msg:null,label:null,hideTo:null,hideToOffset:null,input:{value:"",type:"text",placeholder:"请输入"},btnText:"确认"};for(var f in m){if(f=="input"){for(var h in m[f]){k[f][h]=m[f][h]}}else{k[f]=m[f]}}var g="validateCodeClear"+d.zIndex,n=new d({autoDestroy:false,html:"<div class='singleInput'><div><span class='icon-train-two'></span></div><div style='clear:both;'></div><div class='msg'></div><div class='input'><span></span><input id='"+g+"' /><a href='javascript:;' id='"+g+"_c' class='clear-input'><label class='icon-train-two icon-clear-input'></label></a></div><div class='btnContainer'><div></div></div></div>"});clearInput("#"+g,"#"+g+"_c");n.container.find(".icon-clear-input").eq(0).css({"margin-left":"22px","margin-top":"8px"});n.bg.css("opacity","0.5");n.container.css("width","90%");n.setContent=function(q,p){if(q.msg){this.container.find(".msg").eq(0).html(q.msg)}else{if(p){this.container.find(".msg").eq(0).hide()}}if(q.label){this.container.find(".input > span").eq(0).html(q.label)}else{if(p){this.container.find(".input > span").eq(0).hide()}}var o=this.container.find("input").eq(0);if(q.input){for(var j in q.input){o.attr(j,q.input[j])}}};n.setContent(k);n.getInput=function(){return this.container.find(".input input").eq(0)};n.container.find(".input input").eq(0).bind("focus",function(){});n.container.find(".singleInput > div:first-child > span").eq(0).bind("touchend",function(i){i.preventDefault();i.stopPropagation();n.setAutoDestroy(true);if(k.hideTo){n.hideTo(k.hideTo,k.hideToOffset)}else{n.hide()}if(e){e()}});n.container.find(".btnContainer > div").eq(0).bind("touchend",function(){if(l){l(n.container.find("input").eq(0).val())}}).text(k.btnText);return n};d.showDialog=function(g,f,e){mobileUtil.dialog(g,"body",f);if(e){$("#showTip button").eq(0).text(e)}};d.showExplain=function(g,e){if(typeof g=="string"){g=$(g)}e=e||$(".layer-close");var h=function(){g.hide();e.hide();e.unbind("click",h)};e.bind("click",h);g.show();e.show()};window.zjPopup=d})();(function(){var a={};a.envi={hasTouch:"ontouchstart" in window,isAndroid:false,isIOS:false,isIPhone:false,isIPad:false,isInWeixin:false,isInQQ:false,deviceType:null,deviceModel:null,osVersion:null,init:function(){var b=window.navigator.appVersion;if(/Android /.test(b)){this.isAndroid=true}else{if(/iPhone;/.test(b)){this.isIPhone=true}else{if(/iPad;/.test(b)){this.isIPad=true}}}if(/MicroMessenger/.test(b)){this.isInWeixin=true}else{if(/MQQBrowser/.test(b)){this.isInQQ=true}}this.deviceType=this.isAndroid?"Android":(this.isIPhone?"iPhone":(this.isIPad?"iPad":"PC"));if(this.isAndroid){this.osVersion=/Android (\d+[^;]+)?;/.exec(b)[1],this.deviceModel=/; ([^;\)]+)\)/.exec(b)[1]}else{if(this.isIPhone||this.isIPad){this.osVersion=/ OS (\d+[^ ]+)? /.exec(b)[1].replace(/_/g,".")}}this.isIOS=/Mac OS X/.test(b)},toString:function(d){var b=[window.navigator.appVersion];for(var c in this){if(typeof this[c]!="function"){b.push(c+":"+this[c])}}b.push("width:"+$(window).width());b.push("height:"+$(window).height());return b.join(d||"\r\n")}};a.envi.init();a.log=function(b){};a.date={parse:function(b){return new Date(Date.parse(b.replace("-/g","/")))},getDiff:function(b,c){var g=(b.getTime()-c.getTime());var d=Math.floor(g/24/3600/1000),e=Math.floor((g/3600/1000)%24),f=Math.floor((g/1000/60)%60),h=Math.floor((g/1000)%60);return{day:d,hour:e,minute:f,second:h}}};a.config={platId:501,getUseAccountType:function(b){a.apis.isWorkTime(function(c){if(c){utilityRailway.getAccountConfigure(function(d){b(d,true)})}else{b(a.useAccountType.tc,false)}})}};a.useAccountType={both:0,tc:1,_12306:2};a.apiHelper={getOpts:function(b,d,f,c,g,e){return{url:b,data:d,type:f,dataType:e||"json",timeout:g||20000,success:function(h){if(c){c(true,h)}},error:function(h){if(c){c(false,h)}}}},get:function(b,d,c,e){if($.isFunction(d)){c=d,d=null}return $.ajax(this.getOpts(b,d,"GET",c,e))},post:function(b,d,c,e){return $.ajax(this.getOpts(b,d,"POST",c,e))},getJSONP:function(b,d,c,e){if($.isFunction(d)){c=d,d=null}return $.ajax(this.getOpts(b,d,"GET",c,e,"jsonp"))},postJSONP:function(b,d,c,e){return $.ajax(this.getOpts(b,d,"POST",c,e,"jsonp"))}};a.trainUser={get:function(){var b=store.get("TrainUser");if(b){return JSON.parse(b)}return null},getTemp:function(){return store.get("TrainUserTemping")},isLogined:function(d,c,e,i){if(typeof c=="boolean"){e=c,c=null}e=e==false?false:true;var h=this.get();if(!h){d(false)}else{var f=i||h.username,g={opendId:getWxObj().openid||store.get("WxOpenid")||"",userName:encodeURIComponent(f),binding:2,platId:a.config.platId};if(e){showLoading()}var b="BingingKyfw";a.apiHelper.get(b,{Para:JSON.stringify(g)},function(j,k){if(e){hideLoading()}if(j){d(k.msgCode=="1000")}else{if(c){c(k)}else{zjPopup.showDialog("获取登录状态失败！")}}})}},login:function(b,d){var c=function(){utilityRailway.bindEvent();if(d){$("#refund-prompt").html(d).show()}utilityRailway.openLoginPage()};utilityRailway.loginCallback=function(e){if(e==1){if(b){b()}}else{c()}};c()},checkAndLogin:function(b,e,c,g){if(typeof e=="boolean"){c=e,e=null}var f=this,d=function(){if(c==false){b({status:1,msg:"需要登录"})}f.login(function(){b({status:0,msg:"登录成功"})},e)};this.isLogined(function(h){if(h){b({status:0,msg:"不需要登录"})}else{d()}},function(){e="登录已失效，请重新登录";d()},c,g)},checkAndLoginByName:function(e,b,d,c){utilityRailway.autoLoginUserName=e;this.checkAndLogin(b,d,c,e)},refreshValidateCodeByRequestId:function(c,b){this.refreshValidateCode({data:{Type:0,RequestId:c},label:"登录验证码",timeout:5000,userName:this.getTemp().username},b)},refreshValidateCodeByOrderId:function(d,b,e,c){this.refreshValidateCode({data:{Type:1,OrderId:d},label:"下单验证码",hideTo:c,hideToOffset:{offsetX:0,offsetY:500},timeout:5000,userName:e},b)},refreshValidateCode:function(i,d){var k=null,f="12306GetCodeTime",c="12306InputCodeData",h=null,b=function(m,l,n,o){d({status:m,msg:l,success:n,userCancel:o==true})},g=function(){h=localStorage.getItem(f);if(h){h=Number(h);if(Date.now()-h<=8*60*1000){return true}else{localStorage.setItem(f,null)}}return false},e=function(l){localStorage.setItem(c,JSON.stringify(l));b(1,"需要输入验证码",false);var o=Math.ceil((h-Date.now())/1000)+130,n=zjPopup.getSingleInput({msg:"msg",label:i.label,hideTo:i.hideTo,hideToOffset:i.hideToOffset,input:{placeholder:"请在10分钟内输入验证码"}},function(q){n.hide();var p=function(t,s){zjPopup.showDialog(t,function(){n.show()},s)},r=function(){b(2,"验证输入验证码",false);zjPopup.show12306Loading("12306验证码验证中");var s="SendCaptChar.html",t={CtKey:l.CaptchaKey,UserName:i.userName,Result:q};if(i.data.OrderId){t.OrderId=i.data.OrderId}else{t.RequestId=i.data.RequestId}a.apiHelper.get(s,t,function(u,v){zjPopup.hide12306Loading();if(u){a.log(v);if(v.Code=="1100"){localStorage.setItem(f,null);b(0,"验证成功",true)}else{if(v.Code=="1212"){localStorage.setItem(f,null);b(0,v.Msg,false)}else{n.getInput().val("");p(v.Msg,"重新输入")}}}else{p("服务器繁忙，请稍后重试！")}})};if(!q){p("12306购票要求输入验证码，您还没有输入哦","立即输入")}else{r()}},function(){b(0,"取消输入验证码",false,true)});n.opts.hideBefore=function(){if(k){clearTimeout(k)}};if(l.CaptchaType==0||l.CaptchaType==1){(function(){var p=o>=1?"<label style='color:#ff6600'>"+o+"S</label>&nbsp;内 ":"";p+="<label style='color:#ff6600'>{0}</label><br />{1}发到12306账号绑定的手机。".zjFill(i.label,o>=1?"将":"已经");n.setContent({msg:p});if(k){clearTimeout(k)}if(--o>=0){k=setTimeout(arguments.callee,1000)}})()}else{var m="<img src='data:image/png;base64,"+l.CaptchaImage+"' style='max-width:98%; max-height:11rem; vertical-align:top; margin:auto; margin-bottom:-10px' />";n.setContent({msg:m});n.container.find(".msg img").eq(0).bind("load",function(){n.toCenter()})}n.show()},j=function(){var l="GetCaptchaStatus.html",n=arguments.callee,m=function(){var p=new Date().getTime(),o=(p-a.trainUser.refreshValidateCodeFirstTime)/(1000*60);if(k){clearTimeout(k)}if(o>20){return}k=setTimeout(n,i.timeout)};a.apiHelper.get(l,i.data,function(q,o){if(q){if(o.Code==100){var p=o.Data.IsNeedCaptcha;if(p==0){m()}else{if(p==1){h=Date.now();localStorage.setItem(f,h);e(o.Data)}else{b(0,"无需验证码",true)}}}else{if(o.Code==400){b(0,"参数错误",false)}}}else{m()}})};if(false&&g()){e(JSON.parse(localStorage.getItem(c)))}else{if(!a.trainUser.refreshValidateCodeFirstTime){a.trainUser.refreshValidateCodeFirstTime=new Date().getTime()}j()}},clear:function(){store.set("TrainUser","");storeWithExpiration.set("isTrainLogged",false)},autoLogin:function(b,d){console.error("autoLogin 已舍弃，不应调用此方法");return;var c=this.isLogined();if(c){if(b){b()}}else{var e=this.get();if(e){utilityRailway.autoLogin(e.username)}else{this.login(b,d)}}}};a.apis={isWorkTime:function(b){$.ajax({url:"CheckWorkTime",type:"post",timeout:20000,dataType:"text",success:function(c){b(c=="true")},complete:function(c,d){}})},getRemoteContacts:function(b,c,d){a.apiHelper.get("GetFavoriteContactsForOtherAccounts",{otherAccounts:b,type:d?1:0,platId:a.config.platId},c)},getPassengerVerify:function(c,b){a.apiHelper.get("GetPassengerVerify",c,b)}};a.events={hashChange:function(f,d,c){f=f.toLowerCase();if(!this.hashArr){var b=this;$(window).bind("hashchange",function(g){var j=location.hash.toLocaleLowerCase(),k=g.oldURL.substring(g.oldURL.lastIndexOf("#")+1).toLowerCase();if(j){j=j.substring(1)}for(var h in b.hashArr){if(b.hashArr[h].name==k){b.hashArr[h].callback(false,g);break}if(b.hashArr[h].name==j){b.hashArr[h].callback(true,g);break}}});this.hashArr=[]}for(var e in this.hashArr){if(this.hashArr[e].name==f){if(!c){this.hashArr[e].funs.length=0}this.hashArr[e].funs.push(d);return}}this.hashArr.push({name:f,funs:[d],callback:function(j,g){for(var h in this.funs){this.funs[h](j,g)}}})}};window.zj=a})();
});