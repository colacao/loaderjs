define("location",function (require, exports, module) {
	!function(){function f(c){function d(b){$.ajax({url:"http://api.map.baidu.com/geocoder/v2/?ak=R1BS15aSlKUTpc0YG6GbDk7Q&output=json&pois=0&location="+b.latitude+","+b.longitude,dataType:"jsonp",success:function(a){0===a.status?$.extend(b,a.result.addressComponent,{business:a.result.business,cityCode:a.result.cityCode}):b.tips="获取地址信息失败";try{localStorage.setItem("locationInfo",JSON.stringify(b))}catch(e){}h&&h(b)}})}var k={latitude:c.coords.latitude,longitude:c.coords.longitude};if(i){h&&h(k);try{localStorage.setItem("locationInfo",JSON.stringify(k))}catch(l){}}else{$.ajax({url:"http://api.map.baidu.com/geoconv/v1/?ak=R1BS15aSlKUTpc0YG6GbDk7Q&from=1&to=5&output=json&coords="+k.longitude+","+k.latitude,dataType:"jsonp",success:function(b){d(0===b.status?{longitude:b.result[0].x,latitude:b.result[0].y}:k)}})}}function g(c){var d={};switch(c.code){case c.PERMISSION_DENIED:d.tips="用户拒绝获取地理位置",d.reject=!0;break;case c.POSITION_UNAVAILABLE:d.tips="位置信息不可用";break;case c.TIMEOUT:d.tips="获取用户位置请求超时";break;case c.UNKNOWN_ERROR:d.tips="获取位置失败，请重试"}h&&h(d)}var h,i;if(navigator.geolocation){$.location=function(a,b,c){h=a,"object"==typeof b&&(c=b,b=void 0);var d=$.extend({enableHighAccuracy:!0,maximumAge:30000,timeout:12000},c);i=b,navigator.geolocation.getCurrentPosition(f,g,d)}}else{var j={tips:"浏览器不支持定位"};$.location=function(b){b(j)}}$.historyLocation=function(){try{return localStorage.getItem("locationInfo")}catch(b){}},$.locationByIp=function(b){$.ajax({url:"http://m.ly.com/ajax/GetCityByIp.ashx",dataType:"jsonp",timeout:10000,success:function(a){var e={};if(a){e={province:a.ProvinceName,provinceCode:a.ProvinceID,city:a.CityName,cityCode:a.CityID};try{localStorage.setItem("locationInfo",JSON.stringify(e))}catch(k){}}else{e={tips:"获取地址信息失败"}}b&&b(e)},error:function(){b&&b({tips:"获取地址信息失败"})}})}}();
});